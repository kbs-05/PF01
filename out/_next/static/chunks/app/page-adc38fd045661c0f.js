(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8654:(e,t,n)=>{Promise.resolve().then(n.bind(n,9613))},9613:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var s=n(5155),a=n(2115);function r(){let[e,t]=(0,a.useState)(!1);return(0,s.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-school-line text-white w-6 h-6 flex items-center justify-center"})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Pierre de la Fontaine"})]})}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center space-x-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-user-line text-blue-600 w-4 h-4 flex items-center justify-center"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Caissier"}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line w-4 h-4 flex items-center justify-center text-gray-400"})]}),e&&(0,s.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border py-1 z-10",children:[(0,s.jsxs)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)("i",{className:"ri-user-settings-line w-4 h-4 mr-2 flex items-center justify-center"}),"Profil"]}),(0,s.jsxs)("a",{href:"#",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,s.jsx)("i",{className:"ri-settings-line w-4 h-4 mr-2 flex items-center justify-center"}),"Param\xe8tres"]}),(0,s.jsx)("hr",{className:"my-1"}),(0,s.jsxs)("a",{href:"#",className:"block px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:[(0,s.jsx)("i",{className:"ri-logout-box-line w-4 h-4 mr-2 flex items-center justify-center"}),"D\xe9connexion"]})]})]})})]})})})}var l=n(3915),i=n(5317),o=n(5404);let c=(0,l.Dk)().length?(0,l.Sx)():(0,l.Wp)({apiKey:"AIzaSyCcVV_FeUdY2y-o-50SXawHhZPSrS4nvVg",authDomain:"pf00-b9e58.firebaseapp.com",projectId:"pf00-b9e58",storageBucket:"pf00-b9e58.firebasestorage.app",messagingSenderId:"815924358207",appId:"1:815924358207:web:689db0dc393a6a18f19c8a",measurementId:"G-0KC2DSNN91"}),d=(0,i.aU)(c);async function m(){try{let e=(0,i.rJ)(d,"students");return(await (0,i.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Erreur r\xe9cup\xe9ration \xe9tudiants :",e),[]}}async function u(){try{let e=(0,i.rJ)(d,"payments");return(await (0,i.GG)(e)).docs.map(e=>{let t,n=e.data();return t="object"==typeof n.date&&null!==n.date&&"toDate"in n.date&&"function"==typeof n.date.toDate?n.date.toDate().toISOString():"string"==typeof n.date?n.date:new Date().toISOString(),{id:e.id,studentName:n.studentName,month:n.month,amount:n.amount,paymentMethod:n.paymentMethod,date:t}})}catch(e){return console.error("Erreur r\xe9cup\xe9ration paiements :",e),[]}}function x(){let[e,t]=(0,a.useState)({totalStudents:0,paidThisMonth:0,totalAmount:0,pendingPayments:0}),[n,r]=(0,a.useState)([]);return(0,a.useEffect)(()=>{!async function(){try{let e=await m(),n=await u(),s=new Date().getMonth()+1,a=new Date().getFullYear(),l=n.filter(e=>{let t=new Date(e.date);return t.getMonth()+1===s&&t.getFullYear()===a}),i=n.reduce((e,t)=>e+t.amount,0);t({totalStudents:e.length,paidThisMonth:l.length,totalAmount:i,pendingPayments:e.length-l.length}),r(n.slice(0,5))}catch(e){console.error("Erreur chargement donn\xe9es tableau de bord:",e)}}()},[]),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord"}),(0,s.jsxs)("button",{onClick:()=>{let t='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="UTF-8">\n        <title>Tableau de bord - Pierre de la Fontaine</title>\n        <style>\n          body {\n            font-family: Arial, sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n            line-height: 1.6;\n          }\n          .header {\n            text-align: center;\n            border-bottom: 2px solid #333;\n            padding-bottom: 20px;\n            margin-bottom: 30px;\n          }\n          .school-name {\n            font-size: 24px;\n            font-weight: bold;\n            color: #2563eb;\n            margin-bottom: 10px;\n          }\n          .dashboard-title {\n            font-size: 20px;\n            font-weight: bold;\n            color: #333;\n            margin-bottom: 30px;\n          }\n          .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(2, 1fr);\n            gap: 20px;\n            margin-bottom: 30px;\n          }\n          .stat-card {\n            background-color: #f8f9fa;\n            padding: 20px;\n            border-radius: 8px;\n            border: 1px solid #dee2e6;\n          }\n          .stat-label {\n            font-weight: bold;\n            color: #495057;\n            margin-bottom: 5px;\n          }\n          .stat-value {\n            font-size: 24px;\n            font-weight: bold;\n            color: #212529;\n          }\n          .recent-payments {\n            margin-top: 30px;\n          }\n          .payments-table {\n            width: 100%;\n            border-collapse: collapse;\n            margin-top: 10px;\n          }\n          .payments-table th,\n          .payments-table td {\n            border: 1px solid #dee2e6;\n            padding: 10px;\n            text-align: left;\n          }\n          .payments-table th {\n            background-color: #f8f9fa;\n            font-weight: bold;\n          }\n          .footer {\n            text-align: center;\n            margin-top: 40px;\n            padding-top: 20px;\n            border-top: 1px solid #dee2e6;\n            color: #6c757d;\n            font-size: 14px;\n          }\n          @media print {\n            body { margin: 0; padding: 10px; }\n            .header { margin-bottom: 20px; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <div class="school-name">Pierre de la Fontaine</div>\n          <div>AKAE apr\xe8s l\'Ecole publique Ozoungue</div>\n          <div>T\xe9l: 077 71 55 10 / 066 31 07 08 / 077 80 27 78 / 066 30 01 40</div>\n        </div>\n\n        <div class="dashboard-title">TABLEAU DE BORD</div>\n        <div style="text-align: center; margin-bottom: 20px; color: #6c757d;">\n          G\xe9n\xe9r\xe9 le '.concat(new Date().toLocaleDateString("fr-FR")," \xe0 ").concat(new Date().toLocaleTimeString("fr-FR"),'\n        </div>\n\n        <div class="stats-grid">\n          <div class="stat-card">\n            <div class="stat-label">Total \xe9l\xe8ves</div>\n            <div class="stat-value">').concat(e.totalStudents,'</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Pay\xe9 ce mois</div>\n            <div class="stat-value">').concat(e.paidThisMonth,'</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">Montant total</div>\n            <div class="stat-value">').concat(e.totalAmount.toLocaleString(),' CFA</div>\n          </div>\n          <div class="stat-card">\n            <div class="stat-label">En attente</div>\n            <div class="stat-value">').concat(e.pendingPayments,'</div>\n          </div>\n        </div>\n\n        <div class="recent-payments">\n          <h3>Paiements r\xe9cents</h3>\n          <table class="payments-table">\n            <thead>\n              <tr>\n                <th>\xc9l\xe8ve</th>\n                <th>Mois</th>\n                <th>Montant</th>\n                <th>Date</th>\n              </tr>\n            </thead>\n            <tbody>\n              ').concat(n.map(e=>"\n                <tr>\n                  <td>".concat(e.studentName,"</td>\n                  <td>").concat(e.month,"</td>\n                  <td>").concat(e.amount.toLocaleString()," CFA</td>\n                  <td>").concat(new Date(e.date).toLocaleDateString("fr-FR"),"</td>\n                </tr>\n              ")).join(""),'\n            </tbody>\n          </table>\n        </div>\n\n        <div class="footer">\n          <p>\xc9cole Pierre de la Fontaine - Syst\xe8me de gestion des paiements</p>\n        </div>\n      </body>\n      </html>\n    '),s=window.open("","_blank");s&&(s.document.write(t),s.document.close(),s.print())},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2 whitespace-nowrap cursor-pointer",children:[(0,s.jsx)("i",{className:"ri-printer-line w-4 h-4 flex items-center justify-center"}),(0,s.jsx)("span",{children:"Imprimer"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsx)(p,{color:"blue",label:"Total \xe9l\xe8ves",value:e.totalStudents,icon:"ri-group-line"}),(0,s.jsx)(p,{color:"green",label:"Pay\xe9 ce mois",value:e.paidThisMonth,icon:"ri-checkbox-circle-line"}),(0,s.jsx)(p,{color:"purple",label:"Montant total",value:"".concat(e.totalAmount.toLocaleString()," CFA"),icon:"ri-money-dollar-circle-line"}),(0,s.jsx)(p,{color:"orange",label:"En attente",value:e.pendingPayments,icon:"ri-time-line"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Paiements r\xe9cents"}),(0,s.jsx)("div",{className:"space-y-3",children:0===n.length?(0,s.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Aucun paiement enregistr\xe9"}):n.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-user-line text-blue-600 w-4 h-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.studentName}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.month})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[e.amount.toLocaleString()," CFA"]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.date).toLocaleDateString()})]})]},t))})]}),(0,s.jsxs)("div",{className:"bg-white border rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"R\xe9partition mensuelle"}),(0,s.jsx)("div",{className:"space-y-2",children:["Septembre","Octobre","Novembre","D\xe9cembre","Janvier","F\xe9vrier","Mars","Avril","Mai"].map((t,a)=>{let r=n.filter(e=>e.month===t),l=e.totalStudents>0?r.length/e.totalStudents*100:0;return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:t}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l,"%")}})}),(0,s.jsx)("span",{className:"text-sm text-gray-500 w-12",children:r.length})]})]},a)})})]})]})]})})}function p(e){let{color:t,label:n,value:a,icon:r}=e;return(0,s.jsx)("div",{className:"bg-".concat(t,"-50 p-6 rounded-lg"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-".concat(t,"-600 text-sm font-medium"),children:n}),(0,s.jsx)("p",{className:"text-2xl font-bold text-".concat(t,"-900"),children:a})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-".concat(t,"-100 rounded-lg flex items-center justify-center"),children:(0,s.jsx)("i",{className:"".concat(r," text-").concat(t,"-600 w-6 h-6")})})]})})}(0,o.xI)(c);let h=async()=>{let e=(0,i.rJ)(d,"students");return(await (0,i.GG)(e)).docs.map(e=>({id:e.id,...e.data()}))},b=async e=>({id:(await (0,i.gS)((0,i.rJ)(d,"students"),{...e,createdAt:i.Dc.now()})).id,...e}),g=async e=>({id:(await (0,i.gS)((0,i.rJ)(d,"payments"),{...e,date:e.date?new Date(e.date):i.Dc.now()})).id,...e}),f=e=>{let t=v(e),n=window.open("","_blank");n&&(n.document.write(t),n.document.close(),n.print())},j=e=>{let t=new Blob([v(e)],{type:"text/html"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download="recu_".concat(e.studentName,"_").concat(e.month,"_").concat(e.id,".html"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)},v=e=>'\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset="UTF-8">\n      <title>Re\xe7u de paiement</title>\n      <style>\n        body {\n          font-family: Arial, sans-serif;\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 20px;\n          line-height: 1.6;\n        }\n        .header {\n          text-align: center;\n          border-bottom: 2px solid #333;\n          padding-bottom: 20px;\n          margin-bottom: 30px;\n        }\n        .school-name {\n          font-size: 24px;\n          font-weight: bold;\n          color: #2563eb;\n          margin-bottom: 10px;\n        }\n        .receipt-title {\n          font-size: 20px;\n          font-weight: bold;\n          color: #333;\n          margin-bottom: 30px;\n        }\n        .receipt-info {\n          background-color: #f8f9fa;\n          padding: 20px;\n          border-radius: 8px;\n          margin-bottom: 20px;\n        }\n        .info-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 10px;\n          padding: 8px 0;\n          border-bottom: 1px solid #dee2e6;\n        }\n        .info-label {\n          font-weight: bold;\n          color: #495057;\n        }\n        .info-value {\n          color: #212529;\n        }\n        .amount {\n          font-size: 18px;\n          font-weight: bold;\n          color: #28a745;\n        }\n        .footer {\n          text-align: center;\n          margin-top: 40px;\n          padding-top: 20px;\n          border-top: 1px solid #dee2e6;\n          color: #6c757d;\n          font-size: 14px;\n        }\n        .signature {\n          margin-top: 30px;\n          text-align: right;\n        }\n        .signature-line {\n          border-top: 1px solid #333;\n          width: 200px;\n          margin: 20px 0 5px auto;\n        }\n        @media print {\n          body { margin: 0; padding: 10px; }\n          .header { margin-bottom: 20px; }\n        }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <div class="school-name">Pierre de la Fontaine</div>\n        <div>AKAE apr\xe8s l\'Ecole publique Ozoungue</div>\n        <div>T\xe9l: 077 71 55 10 / 066 31 07 08 / 077 80 27 78 / 066 30 01 40</div>\n      </div>\n\n      <div class="receipt-title">RE\xc7U DE PAIEMENT</div>\n\n      <div class="receipt-info">\n        <div class="info-row">\n          <span class="info-label">N\xb0 de re\xe7u:</span>\n          <span class="info-value">'.concat(e.id,'</span>\n        </div>\n        <div class="info-row">\n          <span class="info-label">Nom de l\'\xe9l\xe8ve:</span>\n          <span class="info-value">').concat(e.studentName,'</span>\n        </div>\n        <div class="info-row">\n          <span class="info-label">Mois pay\xe9:</span>\n          <span class="info-value">').concat(e.month,'</span>\n        </div>\n        <div class="info-row">\n          <span class="info-label">Mode de paiement:</span>\n          <span class="info-value">').concat(y(e.paymentMethod),'</span>\n        </div>\n        <div class="info-row">\n          <span class="info-label">Date de paiement:</span>\n          <span class="info-value">').concat(new Date(e.date).toLocaleDateString("fr-FR"),'</span>\n        </div>\n        <div class="info-row">\n          <span class="info-label">Montant pay\xe9:</span>\n          <span class="info-value amount">').concat(e.amount.toLocaleString(),' CFA</span>\n        </div>\n      </div>\n\n      <div class="signature">\n        <div>Signature du caissier</div>\n        <div class="signature-line"></div>\n        <div>Date: ').concat(new Date().toLocaleDateString("fr-FR"),"</div>\n      </div>\n\n      <div class=\"footer\">\n        <p>Merci pour votre paiement. Conservez ce re\xe7u pour vos dossiers.</p>\n        <p>En cas de probl\xe8me, contactez l'administration de l'\xe9cole.</p>\n      </div>\n    </body>\n    </html>\n  "),y=e=>{switch(e){case"cash":default:return"Esp\xe8ces";case"transfer":return"Virement bancaire";case"check":return"Ch\xe8que";case"mobile":return"Mobile Money"}};function N(){let[e,t]=(0,a.useState)({class:"",studentName:"",month:"",amount:""}),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)("list"),[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!1),[u,x]=(0,a.useState)(null),[p,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{r(await h())})()},[]);let v=e.class?n.filter(t=>t.class===e.class):[],y=async t=>{t.preventDefault();let{class:n,studentName:s,month:a,amount:r}=e;if(!n||!s||!a||!r)return void alert("Veuillez remplir tous les champs obligatoires");m(!0);try{let e={studentName:s,month:a,amount:parseFloat(r),paymentMethod:"cash",date:new Date().toISOString(),id:Date.now().toString()};await g(e),x(e),c(!0),b(!0)}catch(e){console.error("Erreur lors du traitement du paiement:",e),alert("Erreur lors du traitement du paiement")}finally{m(!1)}},N=e=>{let{name:n,value:s}=e.target;t(e=>({...e,[n]:s})),"class"===n&&t(e=>({...e,studentName:""}))},w=e=>{i(e),t(e=>({...e,studentName:""}))};return(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Nouveau paiement"}),o&&(0,s.jsx)("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("i",{className:"ri-checkbox-circle-line text-green-600 w-5 h-5 mr-2 flex items-center justify-center"}),(0,s.jsx)("span",{className:"text-green-800",children:"Paiement enregistr\xe9 avec succ\xe8s !"})]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsxs)("button",{onClick:()=>{u&&f(u)},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors whitespace-nowrap cursor-pointer",children:[(0,s.jsx)("i",{className:"ri-printer-line w-4 h-4 mr-1 flex items-center justify-center"}),"Imprimer"]}),(0,s.jsxs)("button",{onClick:()=>{u&&j(u)},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors whitespace-nowrap cursor-pointer",children:[(0,s.jsx)("i",{className:"ri-download-line w-4 h-4 mr-1 flex items-center justify-center"}),"T\xe9l\xe9charger"]}),(0,s.jsxs)("button",{onClick:()=>{t({class:"",studentName:"",month:"",amount:""}),i("list"),c(!1),b(!1),x(null)},className:"bg-purple-600 text-white px-3 py-1 rounded text-sm hover:bg-purple-700 transition-colors whitespace-nowrap cursor-pointer",children:[(0,s.jsx)("i",{className:"ri-add-line w-4 h-4 mr-1 flex items-center justify-center"}),"Nouveau paiement"]})]})]})}),(0,s.jsxs)("form",{id:"payment-form",onSubmit:y,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"class",className:"block text-sm font-medium text-gray-700 mb-2",children:"Classe *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"class",name:"class",value:e.class,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none pr-8",required:!0,disabled:p,children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionner une classe"}),["2ANS","3ANS","4ANS","5ANS","CP1","CP2","CE1","CE2","CM1","CM2"].map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center pointer-events-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom de l'\xe9l\xe8ve *"}),(0,s.jsxs)("div",{className:"flex space-x-4 mb-3",children:[(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"studentInputType",value:"list",checked:"list"===l,onChange:()=>w("list"),className:"mr-2",disabled:p}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Liste"})]}),(0,s.jsxs)("label",{className:"flex items-center cursor-pointer",children:[(0,s.jsx)("input",{type:"radio",name:"studentInputType",value:"manual",checked:"manual"===l,onChange:()=>w("manual"),className:"mr-2",disabled:p}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"Manuel"})]})]}),"list"===l?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"studentName",name:"studentName",value:e.studentName,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none pr-8",required:!0,disabled:!e.class||p,children:[(0,s.jsx)("option",{value:"",children:e.class?"S\xe9lectionner un \xe9l\xe8ve":"Choisir d'abord une classe"}),v.map((e,t)=>(0,s.jsx)("option",{value:e.name,children:e.name},t))]}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center pointer-events-none"})]}):(0,s.jsx)("input",{type:"text",id:"studentName",name:"studentName",value:e.studentName,onChange:N,placeholder:"Saisir le nom de l'\xe9l\xe8ve",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:p})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-700 mb-2",children:"Mois de paiement *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{id:"month",name:"month",value:e.month,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none pr-8",required:!0,disabled:p,children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionner un mois"}),["Septembre","Octobre","Novembre","D\xe9cembre","Janvier","F\xe9vrier","Mars","Avril","Mai"].map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center pointer-events-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Montant (CFA) *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"number",id:"amount",name:"amount",value:e.amount,onChange:N,placeholder:"15000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:p}),(0,s.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:"CFA"})]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"R\xe9capitulatif"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-blue-700",children:"Classe:"}),(0,s.jsx)("span",{className:"text-blue-900",children:e.class||"Non s\xe9lectionn\xe9e"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-blue-700",children:"\xc9l\xe8ve:"}),(0,s.jsx)("span",{className:"text-blue-900",children:e.studentName||"Non s\xe9lectionn\xe9"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-blue-700",children:"Mois:"}),(0,s.jsx)("span",{className:"text-blue-900",children:e.month||"Non s\xe9lectionn\xe9"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-blue-700",children:"Montant:"}),(0,s.jsx)("span",{className:"text-blue-900 font-medium",children:e.amount?"".concat(parseFloat(e.amount).toLocaleString()," CFA"):"0 CFA"})]})]})]}),!p&&(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsx)("button",{type:"submit",disabled:d,className:"flex-1 bg-blue-600 text-white py-3 px-6 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap cursor-pointer",children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"ri-loader-4-line animate-spin w-5 h-5 mr-2 flex items-center justify-center"}),"Traitement..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("i",{className:"ri-money-dollar-circle-line w-5 h-5 mr-2 flex items-center justify-center"}),"Enregistrer le paiement"]})}),(0,s.jsx)("button",{type:"button",onClick:()=>{t({class:"",studentName:"",month:"",amount:""}),i("list")},className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors whitespace-nowrap cursor-pointer",children:"Annuler"})]})]})]})})}function w(){let[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[l,i]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),d=["Septembre","Octobre","Novembre","D\xe9cembre","Janvier","F\xe9vrier","Mars","Avril","Mai"];(0,a.useEffect)(()=>{!async function(){try{let e=await m();t(e);let n=await u();r(n)}catch(e){console.error("Erreur lors du chargement des donn\xe9es:",e)}}()},[]);let x=e.filter(e=>{let t=e.name.toLowerCase().includes(l.toLowerCase()),n=""===o||e.class===o;return t&&n}),p=Array.from(new Set(e.map(e=>e.class))),h=(e,t)=>n.some(n=>n.studentName===e&&n.month===t);return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Suivi des paiements"}),(0,s.jsxs)("button",{onClick:()=>{let e=new Blob([[["Nom","Classe",...d],...x.map(e=>[e.name,e.class,...d.map(t=>h(e.name,t)?"Pay\xe9":"Non pay\xe9")])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="suivi_paiements.csv",n.click(),window.URL.revokeObjectURL(t)},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2 whitespace-nowrap cursor-pointer",children:[(0,s.jsx)("i",{className:"ri-download-line w-4 h-4 flex items-center justify-center"}),(0,s.jsx)("span",{children:"Exporter CSV"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Rechercher un \xe9l\xe8ve...",value:l,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm"}),(0,s.jsx)("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center"})]}),(0,s.jsxs)("div",{className:"sm:w-48 relative",children:[(0,s.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none pr-8 text-sm",children:[(0,s.jsx)("option",{value:"",children:"Toutes les classes"}),p.map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4 flex items-center justify-center pointer-events-none"})]})]}),(0,s.jsx)("div",{className:"bg-white border rounded-lg overflow-hidden",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc9l\xe8ve"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classe"}),d.map((e,t)=>(0,s.jsx)("th",{className:"px-3 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.substring(0,3)},t))]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===x.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:2+d.length,className:"text-center py-8 text-gray-500",children:"Aucun \xe9l\xe8ve trouv\xe9"})}):x.map((e,t)=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,s.jsx)("i",{className:"ri-user-line text-blue-600 w-4 h-4 flex items-center justify-center"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.id})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:e.class})}),d.map((t,n)=>(0,s.jsx)("td",{className:"px-3 py-4 text-center",children:h(e.name,t)?(0,s.jsx)("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)("i",{className:"ri-check-line text-green-600 w-4 h-4 flex items-center justify-center"})}):(0,s.jsx)("div",{className:"w-6 h-6 bg-gray-100 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)("i",{className:"ri-close-line text-gray-400 w-4 h-4 flex items-center justify-center"})})},n))]},e.id||t))})]})})}),(0,s.jsx)("div",{className:"mt-4 text-sm text-gray-600",children:(0,s.jsxs)("p",{children:["Total: ",x.length," \xe9l\xe8ve",x.length>1?"s":""]})})]})}var S=n(3319);function C(){let[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)(""),[l,i]=(0,a.useState)(""),[o,c]=(0,a.useState)("date");(0,a.useEffect)(()=>{(async()=>{t(await u())})()},[]);let d=e.filter(e=>e.studentName.toLowerCase().includes(n.toLowerCase())).filter(e=>!l||e.month===l).sort((e,t)=>"amount"===o?t.amount-e.amount:"student"===o?e.studentName.localeCompare(t.studentName):new Date(t.date).getTime()-new Date(e.date).getTime()),m=d.reduce((e,t)=>e+t.amount,0);return(0,s.jsxs)("div",{className:"p-4 max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Suivi des paiements"}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-4 mb-6",children:[(0,s.jsx)("input",{type:"text",placeholder:"Rechercher un \xe9l\xe8ve",value:n,onChange:e=>r(e.target.value),className:"border p-2 rounded w-full md:w-1/3"}),(0,s.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"border p-2 rounded w-full md:w-1/4",children:[(0,s.jsx)("option",{value:"",children:"Tous les mois"}),["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Ao\xfbt","Septembre","Octobre","Novembre","D\xe9cembre"].map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:o,onChange:e=>c(e.target.value),className:"border p-2 rounded w-full md:w-1/4",children:[(0,s.jsx)("option",{value:"date",children:"Trier par date"}),(0,s.jsx)("option",{value:"amount",children:"Trier par montant"}),(0,s.jsx)("option",{value:"student",children:"Trier par nom"})]})]}),(0,s.jsxs)("div",{className:"mb-4 text-lg font-semibold",children:["Montant total : ",(0,s.jsxs)("span",{className:"text-green-600",children:[m.toLocaleString()," FCFA"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full bg-white border rounded shadow",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100 text-left",children:[(0,s.jsx)("th",{className:"p-3 border",children:"\xc9l\xe8ve"}),(0,s.jsx)("th",{className:"p-3 border",children:"Mois"}),(0,s.jsx)("th",{className:"p-3 border",children:"Montant"}),(0,s.jsx)("th",{className:"p-3 border",children:"Mode de paiement"}),(0,s.jsx)("th",{className:"p-3 border",children:"Date"})]})}),(0,s.jsxs)("tbody",{children:[d.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"p-3 border",children:e.studentName}),(0,s.jsx)("td",{className:"p-3 border",children:e.month}),(0,s.jsxs)("td",{className:"p-3 border",children:[e.amount.toLocaleString()," FCFA"]}),(0,s.jsx)("td",{className:"p-3 border",children:e.paymentMethod}),(0,s.jsx)("td",{className:"p-3 border",children:(0,S.GP)(new Date(e.date),"dd/MM/yyyy")})]},e.id)),0===d.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"text-center p-4",children:"Aucun paiement trouv\xe9"})})]})]})})]})}function A(){let[e,t]=(0,a.useState)({nom:"",prenom:"",classe:"",matricule:""}),[n,r]=(0,a.useState)(!1),[l,i]=(0,a.useState)(!1),o=e=>{let{name:n,value:s}=e.target;t(e=>({...e,[n]:s}))},c=async n=>{n.preventDefault(),r(!0);try{let n={name:e.nom+" "+e.prenom,class:e.classe,parentName:"",parentPhone:""};await b(n),i(!0),t({nom:"",prenom:"",classe:"",matricule:""})}catch(e){console.error("Erreur lors de l'ajout :",e),i(!1)}finally{r(!1)}};return(0,s.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-xl shadow-md",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Ajouter un \xe9l\xe8ve"}),(0,s.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",name:"nom",placeholder:"Nom",value:e.nom,onChange:o,className:"w-full p-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"text",name:"prenom",placeholder:"Pr\xe9nom",value:e.prenom,onChange:o,className:"w-full p-2 border rounded",required:!0}),(0,s.jsx)("input",{type:"text",name:"matricule",placeholder:"Matricule",value:e.matricule,onChange:o,className:"w-full p-2 border rounded",required:!0,disabled:!0}),(0,s.jsxs)("select",{name:"classe",value:e.classe,onChange:o,className:"w-full p-2 border rounded",required:!0,children:[(0,s.jsx)("option",{value:"",children:"S\xe9lectionner une classe"}),(0,s.jsx)("option",{value:"2ANS",children:"2ANS"}),(0,s.jsx)("option",{value:"3ANS",children:"3ANS"}),(0,s.jsx)("option",{value:"4ANS",children:"4ANS"}),(0,s.jsx)("option",{value:"5ANS",children:"5ANS"}),(0,s.jsx)("option",{value:"CP1",children:"CP1"}),(0,s.jsx)("option",{value:"CP2",children:"CP2"}),(0,s.jsx)("option",{value:"CE1",children:"CE1"}),(0,s.jsx)("option",{value:"CE2",children:"CE2"}),(0,s.jsx)("option",{value:"CM1",children:"CM1"}),(0,s.jsx)("option",{value:"CM2",children:"CM2"})]}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:n?"Ajout en cours...":"Ajouter"}),l&&(0,s.jsx)("p",{className:"text-green-600",children:"\xc9l\xe8ve ajout\xe9 avec succ\xe8s âœ…"})]})]})}function M(){let[e,t]=(0,a.useState)("dashboard");return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(r,{}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex space-x-1 mb-8 bg-white rounded-lg p-1 shadow-sm",children:[(0,s.jsxs)("button",{onClick:()=>t("dashboard"),className:"px-6 py-3 rounded-md font-medium transition-colors whitespace-nowrap ".concat("dashboard"===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,s.jsx)("i",{className:"ri-dashboard-line w-5 h-5 mr-2 flex items-center justify-center"}),"Tableau de bord"]}),(0,s.jsxs)("button",{onClick:()=>t("payment"),className:"px-6 py-3 rounded-md font-medium transition-colors whitespace-nowrap ".concat("payment"===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,s.jsx)("i",{className:"ri-money-dollar-circle-line w-5 h-5 mr-2 flex items-center justify-center"}),"Nouveau paiement"]}),(0,s.jsxs)("button",{onClick:()=>t("students"),className:"px-6 py-3 rounded-md font-medium transition-colors whitespace-nowrap ".concat("students"===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,s.jsx)("i",{className:"ri-group-line w-5 h-5 mr-2 flex items-center justify-center"}),"Liste des \xe9l\xe8ves"]}),(0,s.jsxs)("button",{onClick:()=>t("history"),className:"px-6 py-3 rounded-md font-medium transition-colors whitespace-nowrap ".concat("history"===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,s.jsx)("i",{className:"ri-history-line w-5 h-5 mr-2 flex items-center justify-center"}),"Historique"]}),(0,s.jsxs)("button",{onClick:()=>t("addStudent"),className:"px-6 py-3 rounded-md font-medium transition-colors whitespace-nowrap ".concat("addStudent"===e?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,s.jsx)("i",{className:"ri-user-add-line w-5 h-5 mr-2 flex items-center justify-center"}),"Ajouter \xe9l\xe8ve"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm",children:["dashboard"===e&&(0,s.jsx)(x,{}),"payment"===e&&(0,s.jsx)(N,{}),"students"===e&&(0,s.jsx)(w,{}),"history"===e&&(0,s.jsx)(C,{}),"addStudent"===e&&(0,s.jsx)(A,{})]})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[135,965,549,441,684,358],()=>t(8654)),_N_E=e.O()}]);